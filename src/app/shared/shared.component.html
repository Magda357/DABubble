<section class="sidebar" *ngIf="!isWorkspaceOpen">

    <div class="above_sidebar">
        <img src="images/Workspace logo.png" alt="Devspace logo">
        <h2>DevSpace</h2>

        <svg class="new_message_icon" width="24" height="24" viewBox="0 0 24 24" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <mask id="mask0_237_469" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="24"
                height="24">
                <rect width="24" height="24" fill="currentColor" />
            </mask>
            <g mask="url(#mask0_237_469)">
                <path
                    d="M5 23.6998C4.45 23.6998 3.97917 23.504 3.5875 23.1123C3.19583 22.7206 3 22.2498 3 21.6998V7.6998C3 7.1498 3.19583 6.67897 3.5875 6.2873C3.97917 5.89564 4.45 5.6998 5 5.6998H13.925L11.925 7.6998H5V21.6998H19V14.7498L21 12.7498V21.6998C21 22.2498 20.8042 22.7206 20.4125 23.1123C20.0208 23.504 19.55 23.6998 19 23.6998H5ZM16.175 6.2748L17.6 7.6748L11 14.2748V15.6998H12.4L19.025 9.0748L20.45 10.4748L13.825 17.0998C13.6417 17.2831 13.4292 17.429 13.1875 17.5373C12.9458 17.6456 12.6917 17.6998 12.425 17.6998H10C9.71667 17.6998 9.47917 17.604 9.2875 17.4123C9.09583 17.2206 9 16.9831 9 16.6998V14.2748C9 14.0081 9.05 13.754 9.15 13.5123C9.25 13.2706 9.39167 13.0581 9.575 12.8748L16.175 6.2748ZM20.45 10.4748L16.175 6.2748L18.675 3.7748C19.075 3.3748 19.5542 3.1748 20.1125 3.1748C20.6708 3.1748 21.1417 3.3748 21.525 3.7748L22.925 5.1998C23.3083 5.58314 23.5 6.0498 23.5 6.5998C23.5 7.1498 23.3083 7.61647 22.925 7.9998L20.45 10.4748Z"
                    fill="currentColor" />
            </g>
        </svg>
    </div>

    <div id="channels" (click)="toggleChannels()">

        <!--arrow-->
        <svg width="10" height="7" viewBox="0 0 10 7" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M4.12483 5.875L0.874832 2.625C0.478999 2.22917 0.390665 1.77625 0.609832 1.26625C0.828165 0.755417 1.21858 0.5 1.78108 0.5H8.21858C8.78108 0.5 9.1715 0.755417 9.38983 1.26625C9.609 1.77625 9.52067 2.22917 9.12483 2.625L5.87483 5.875C5.74983 6 5.61442 6.09375 5.46858 6.15625C5.32275 6.21875 5.1665 6.25 4.99983 6.25C4.83317 6.25 4.67692 6.21875 4.53108 6.15625C4.38525 6.09375 4.24983 6 4.12483 5.875Z"
                fill="black" />
        </svg>

        <!--circles-->

        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <mask id="mask0_813_12191" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="24"
                height="24">
                <rect width="24" height="24" fill="#D9D9D9" />
            </mask>
            <g mask="url(#mask0_813_12191)">
                <path
                    d="M6 21C4.9 21 3.95833 20.6083 3.175 19.825C2.39167 19.0417 2 18.1 2 17C2 15.9 2.39167 14.9583 3.175 14.175C3.95833 13.3917 4.9 13 6 13C7.1 13 8.04167 13.3917 8.825 14.175C9.60833 14.9583 10 15.9 10 17C10 18.1 9.60833 19.0417 8.825 19.825C8.04167 20.6083 7.1 21 6 21ZM18 21C16.9 21 15.9583 20.6083 15.175 19.825C14.3917 19.0417 14 18.1 14 17C14 15.9 14.3917 14.9583 15.175 14.175C15.9583 13.3917 16.9 13 18 13C19.1 13 20.0417 13.3917 20.825 14.175C21.6083 14.9583 22 15.9 22 17C22 18.1 21.6083 19.0417 20.825 19.825C20.0417 20.6083 19.1 21 18 21ZM6 19C6.55 19 7.02067 18.8043 7.412 18.413C7.804 18.021 8 17.55 8 17C8 16.45 7.804 15.9793 7.412 15.588C7.02067 15.196 6.55 15 6 15C5.45 15 4.97933 15.196 4.588 15.588C4.196 15.9793 4 16.45 4 17C4 17.55 4.196 18.021 4.588 18.413C4.97933 18.8043 5.45 19 6 19ZM18 19C18.55 19 19.021 18.8043 19.413 18.413C19.8043 18.021 20 17.55 20 17C20 16.45 19.8043 15.9793 19.413 15.588C19.021 15.196 18.55 15 18 15C17.45 15 16.979 15.196 16.587 15.588C16.1957 15.9793 16 16.45 16 17C16 17.55 16.1957 18.021 16.587 18.413C16.979 18.8043 17.45 19 18 19ZM12 11C10.9 11 9.95833 10.6083 9.175 9.825C8.39167 9.04167 8 8.1 8 7C8 5.9 8.39167 4.95833 9.175 4.175C9.95833 3.39167 10.9 3 12 3C13.1 3 14.0417 3.39167 14.825 4.175C15.6083 4.95833 16 5.9 16 7C16 8.1 15.6083 9.04167 14.825 9.825C14.0417 10.6083 13.1 11 12 11ZM12 9C12.55 9 13.021 8.804 13.413 8.412C13.8043 8.02067 14 7.55 14 7C14 6.45 13.8043 5.97933 13.413 5.588C13.021 5.196 12.55 5 12 5C11.45 5 10.9793 5.196 10.588 5.588C10.196 5.97933 10 6.45 10 7C10 7.55 10.196 8.02067 10.588 8.412C10.9793 8.804 11.45 9 12 9Z"
                    fill="black" />
            </g>
        </svg>
        <h3>Channels</h3>

        <!--add-->
        <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_813_12245)">
                <mask id="mask0_813_12245" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="3" y="3" width="24"
                    height="24">
                    <rect x="3" y="3" width="24" height="24" fill="#D9D9D9" />
                </mask>
                <g mask="url(#mask0_813_12245)">
                    <path
                        d="M15 22C14.7167 22 14.4793 21.904 14.288 21.712C14.096 21.5207 14 21.2833 14 21V16H9C8.71667 16 8.479 15.904 8.287 15.712C8.09567 15.5207 8 15.2833 8 15C8 14.7167 8.09567 14.479 8.287 14.287C8.479 14.0957 8.71667 14 9 14H14V9C14 8.71667 14.096 8.479 14.288 8.287C14.4793 8.09567 14.7167 8 15 8C15.2833 8 15.521 8.09567 15.713 8.287C15.9043 8.479 16 8.71667 16 9V14H21C21.2833 14 21.5207 14.0957 21.712 14.287C21.904 14.479 22 14.7167 22 15C22 15.2833 21.904 15.5207 21.712 15.712C21.5207 15.904 21.2833 16 21 16H16V21C16 21.2833 15.9043 21.5207 15.713 21.712C15.521 21.904 15.2833 22 15 22Z"
                        fill="#686868" />
                </g>
            </g>
            <defs>
                <clipPath id="clip0_813_12245">
                    <rect x="3" y="3" width="24" height="24" rx="12" fill="white" />
                </clipPath>
            </defs>
        </svg>
    </div>

    <!-- Channels List -->
    <div class="channels-list" *ngIf="showChannels">
        <div class="channel-item" *ngFor="let channel of channels" (click)="selectChannel(channel)">
            <span class="channel-icon">#</span>
            <span class="channel-name">{{ channel.name }}</span>
            <span class="member-count" *ngIf="channel.memberCount">({{ channel.memberCount }})</span>

        </div>

        <span id="channel_adding_container">
            <!-- Channel hinzufügen Icon -->
            <svg class="channel_add" width="24" height="24" viewBox="0 0 24 24" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <mask id="mask0_244_1431" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="24"
                    height="24">
                    <rect width="24" height="24" fill="currentColor" />
                </mask>
                <g mask="url(#mask0_244_1431)">
                    <path
                        d="M12 17C12.2833 17 12.521 16.904 12.713 16.712C12.9043 16.5207 13 16.2833 13 16V13H16.025C16.3083 13 16.5417 12.904 16.725 12.712C16.9083 12.5207 17 12.2833 17 12C17 11.7167 16.904 11.479 16.712 11.287C16.5207 11.0957 16.2833 11 16 11H13V7.975C13 7.69167 12.9043 7.45833 12.713 7.275C12.521 7.09167 12.2833 7 12 7C11.7167 7 11.4793 7.09567 11.288 7.287C11.096 7.479 11 7.71667 11 8V11H7.975C7.69167 11 7.45833 11.0957 7.275 11.287C7.09167 11.479 7 11.7167 7 12C7 12.2833 7.09567 12.5207 7.287 12.712C7.479 12.904 7.71667 13 8 13H11V16.025C11 16.3083 11.096 16.5417 11.288 16.725C11.4793 16.9083 11.7167 17 12 17ZM12 22C10.6167 22 9.31667 21.7373 8.1 21.212C6.88333 20.6873 5.825 19.975 4.925 19.075C4.025 18.175 3.31267 17.1167 2.788 15.9C2.26267 14.6833 2 13.3833 2 12C2 10.6167 2.26267 9.31667 2.788 8.1C3.31267 6.88333 4.025 5.825 4.925 4.925C5.825 4.025 6.88333 3.31233 8.1 2.787C9.31667 2.26233 10.6167 2 12 2C13.3833 2 14.6833 2.26233 15.9 2.787C17.1167 3.31233 18.175 4.025 19.075 4.925C19.975 5.825 20.6873 6.88333 21.212 8.1C21.7373 9.31667 22 10.6167 22 12C22 13.3833 21.7373 14.6833 21.212 15.9C20.6873 17.1167 19.975 18.175 19.075 19.075C18.175 19.975 17.1167 20.6873 15.9 21.212C14.6833 21.7373 13.3833 22 12 22ZM12 20C14.2167 20 16.1043 19.221 17.663 17.663C19.221 16.1043 20 14.2167 20 12C20 9.78333 19.221 7.89567 17.663 6.337C16.1043 4.779 14.2167 4 12 4C9.78333 4 7.896 4.779 6.338 6.337C4.77933 7.89567 4 9.78333 4 12C4 14.2167 4.77933 16.1043 6.338 17.663C7.896 19.221 9.78333 20 12 20Z"
                        fill="currentColor" />
                </g>
            </svg>


            <span class="channel_add_text "> Channel hinzufügen </span> </span>

        <!-- Fallback wenn keine Channels -->
        <div class="no-channels" *ngIf="channels.length === 0">
            <p>Keine Channels gefunden</p>
        </div>


    </div>


    <div id="direkt_messages" (click)="toggleDirectMessages()">

        <!--arrow-->
        <svg width="10" height="7" viewBox="0 0 10 7" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M4.12483 5.875L0.874832 2.625C0.478999 2.22917 0.390665 1.77625 0.609832 1.26625C0.828165 0.755417 1.21858 0.5 1.78108 0.5H8.21858C8.78108 0.5 9.1715 0.755417 9.38983 1.26625C9.609 1.77625 9.52067 2.22917 9.12483 2.625L5.87483 5.875C5.74983 6 5.61442 6.09375 5.46858 6.15625C5.32275 6.21875 5.1665 6.25 4.99983 6.25C4.83317 6.25 4.67692 6.21875 4.53108 6.15625C4.38525 6.09375 4.24983 6 4.12483 5.875Z"
                fill="black" />
        </svg>

        <!--user_icon-->

        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <mask id="mask0_154720_9668" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="24"
                height="24">
                <rect width="24" height="24" fill="#D9D9D9" />
            </mask>
            <g mask="url(#mask0_154720_9668)">
                <path
                    d="M5.85 17.1C6.7 16.45 7.65 15.9373 8.7 15.562C9.75 15.1873 10.85 15 12 15C13.15 15 14.25 15.1873 15.3 15.562C16.35 15.9373 17.3 16.45 18.15 17.1C18.7333 16.4167 19.1877 15.6417 19.513 14.775C19.8377 13.9083 20 12.9833 20 12C20 9.78333 19.221 7.89567 17.663 6.337C16.1043 4.779 14.2167 4 12 4C9.78333 4 7.896 4.779 6.338 6.337C4.77933 7.89567 4 9.78333 4 12C4 12.9833 4.16267 13.9083 4.488 14.775C4.81267 15.6417 5.26667 16.4167 5.85 17.1ZM12 13C11.0167 13 10.1873 12.6627 9.512 11.988C8.83733 11.3127 8.5 10.4833 8.5 9.5C8.5 8.51667 8.83733 7.68733 9.512 7.012C10.1873 6.33733 11.0167 6 12 6C12.9833 6 13.8127 6.33733 14.488 7.012C15.1627 7.68733 15.5 8.51667 15.5 9.5C15.5 10.4833 15.1627 11.3127 14.488 11.988C13.8127 12.6627 12.9833 13 12 13ZM12 22C10.6167 22 9.31667 21.7373 8.1 21.212C6.88333 20.6873 5.825 19.975 4.925 19.075C4.025 18.175 3.31267 17.1167 2.788 15.9C2.26267 14.6833 2 13.3833 2 12C2 10.6167 2.26267 9.31667 2.788 8.1C3.31267 6.88333 4.025 5.825 4.925 4.925C5.825 4.025 6.88333 3.31233 8.1 2.787C9.31667 2.26233 10.6167 2 12 2C13.3833 2 14.6833 2.26233 15.9 2.787C17.1167 3.31233 18.175 4.025 19.075 4.925C19.975 5.825 20.6873 6.88333 21.212 8.1C21.7373 9.31667 22 10.6167 22 12C22 13.3833 21.7373 14.6833 21.212 15.9C20.6873 17.1167 19.975 18.175 19.075 19.075C18.175 19.975 17.1167 20.6873 15.9 21.212C14.6833 21.7373 13.3833 22 12 22ZM12 20C12.8833 20 13.7167 19.871 14.5 19.613C15.2833 19.3543 16 18.9833 16.65 18.5C16 18.0167 15.2833 17.6457 14.5 17.387C13.7167 17.129 12.8833 17 12 17C11.1167 17 10.2833 17.129 9.5 17.387C8.71667 17.6457 8 18.0167 7.35 18.5C8 18.9833 8.71667 19.3543 9.5 19.613C10.2833 19.871 11.1167 20 12 20ZM12 11C12.4333 11 12.7917 10.8583 13.075 10.575C13.3583 10.2917 13.5 9.93333 13.5 9.5C13.5 9.06667 13.3583 8.70833 13.075 8.425C12.7917 8.14167 12.4333 8 12 8C11.5667 8 11.2083 8.14167 10.925 8.425C10.6417 8.70833 10.5 9.06667 10.5 9.5C10.5 9.93333 10.6417 10.2917 10.925 10.575C11.2083 10.8583 11.5667 11 12 11Z"
                    fill="black" />
            </g>
        </svg>
        <h3>Direktnachrichten</h3>

    </div>
    <!-- Direct Messages List -->
    <div class="direct-messages-list" *ngIf="showDirectMessages">
        <div class="dm-item" *ngFor="let user of users" (click)="selectUser(user)">
            <div class="user-avatar">
                <img [src]="user.avatarUrl || '/images/default-avatar.png'" [alt]="user.name">
            </div>
            <span class="user-name">{{ user.name }}</span>
            <span class="user-status" [class.online]="user.isOnline" [class.offline]="!user.isOnline"></span>
        </div>

        <!-- Fallback wenn keine Users -->
        <div class="no-users" *ngIf="users.length === 0">
            <p>Keine Benutzer gefunden</p>
        </div>
    </div>



</section>

<div class="workspace_container" (click)="toggleWorkspace()">
    <h3>{{ isWorkspaceOpen ? 'Workspace-Menü öffnen' : 'Workspace-Menü schließen' }}</h3>

    <!-- Icon ändert sich basierend auf State -->
    <svg *ngIf="!isWorkspaceOpen" class="workspace_menu_icon" [class.rotated]="isWorkspaceOpen" width="18" height="18"
        viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="1" y="1" width="16" height="16" rx="1" stroke="currentColor" stroke-width="2" />
        <path d="M6.71436 1V17" stroke="currentColor" stroke-width="2" />
        <path d="M12.4283 11.2856L10.4961 9.35348C10.3009 9.15822 10.3009 8.84164 10.4961 8.64638L12.4283 6.71422"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" />
    </svg>

    <!-- Anderes Icon wenn geöffnet -->
    <svg *ngIf="isWorkspaceOpen" class="workspace_menu_icon" width="32" height="32" viewBox="0 0 32 32" fill="none"
        xmlns="http://www.w3.org/2000/svg">
        <rect x="8" y="8" width="16" height="16" rx="1" stroke="currentColor" stroke-width="2" />
        <path d="M13.7144 8V24" stroke="currentColor" stroke-width="2" />
        <path d="M17.143 18.2856L19.0752 16.3535C19.2704 16.1582 19.2704 15.8416 19.0752 15.6464L17.143 13.7142"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" />
    </svg>

</div>